# 전처리 가이드 (2025-06-11 업데이트)

## 1. 개요

이 문서는 공공데이터 기반 소비지출 데이터의 전처리 과정을 설명합니다.  
주요 목표는 데이터의 신뢰성과 현실성을 높이고, 협업 및 유지보수를 용이하게 하는 것입니다.

## 2. 주요 개선 사항

- **카테고리명 공백/타입 처리 강화**
  - 모든 카테고리명을 `str(x).strip()`으로 변환하여 공백 및 타입 불일치 문제 해결
- **금액 제한 및 반올림 강제**
  - 카테고리별 min/max 금액 제한 엄격 적용
  - 모든 금액을 100원 단위로 반올림하여 실제 결제 내역과 유사하게 생성
- **예외처리 및 품질 검증**
  - 0원/음수/100원 미만 거래가 생성되지 않도록 코드 보강
  - 테스트 코드 추가로 생성 결과의 현실성 및 안정성 검증
- **코드 가독성 및 문서화**
  - 함수별 주석, 주요 로직 설명 추가
  - 테스트 케이스 예시 포함

## 3. 실행 방법

1. **데이터 파일 준비**
   - `tbsh_gyeonggi_day_이천시.csv` 파일을 프로젝트 루트에 배치
2. **전처리 코드 실행**
3. **결과 확인**
- 카테고리별 통계 출력
- 생성된 데이터프레임 및 통계값 활용

## 4. 주의사항

- **카테고리 매핑 딕셔너리**는 반드시 최신 버전 사용
- **데이터 파일 경로**는 환경에 맞게 수정
- **테스트 코드**로 생성 결과의 품질을 반드시 확인
- **실제 데이터의 카테고리명**과 매핑 딕셔너리의 키가 일치하는지 확인

## 5. 변경 이력

| 날짜       | 변경 내용                          |
|------------|-----------------------------------|
| 2025-06-11 | 카테고리명 공백/타입 처리 강화, 금액 제한 및 반올림 적용, 예외처리 및 테스트 코드 추가, 문서화 완료 |
## 6. 경기도 각 시별 데이터 적용

- **기존 전처리 파이프라인을 경기도 내 각 시(이천시, 시흥시, 수원시 등) 데이터에 적용**
- **입력 파일명만 변경하여 각 시별로 전처리 수행**
- **실행 방법:**  
  - `python backend/preprocessing/preprocess.py`  
  - 입력 파일 경로를 각 시별로 변경하여 실행

## 7. 변경 이력

| 날짜       | 변경 내용                          |
|------------|-----------------------------------|
| 2025-06-11 | 카테고리명 공백/타입 처리 강화, 금액 제한 및 반올림 적용, 예외처리 및 테스트 코드 추가, 문서화 완료 |
| 2025-06-12 | 경기도 각 시별 데이터 적용 사실 문서화 |

## 변경 내역 확인하기
